<!DOCTYPE HTML>
<html>

<head>
    <title>HOD Page</title>
    <meta name="description" content="website description" />
    <meta name="keywords" content="website keywords, website keywords" />
    <link rel="stylesheet" href="../static/css/hr.css">
</head>

<body>
    <div id="main">
        <div id="header">
            <div id="logo">
                <div id="logo_text">
                    <!-- class="logo_colour", allows you to change the colour of the text -->
                    <h1><a href="/"><span class="logo_colour">Head Of Department</span></a></h1>
                    <h2>Pusat Perkembangan Minda Darul Ridzuan</h2>
                </div>
            </div>
            <div id="menubar">
                <ul id="menu">
                    <!-- put class="selected" in the li tag for the selected page - to highlight which page you're on -->
                    <li><a href="/hr">Profile</a></li>
                    <li class="selected"><a href="/hr2">Staff List</a></li>
                    <li><a href="/hr3">Leave Applications</a></li>
                    <li><a href="/hr4">Leave Record</a></li>
                    <li><a href="/logout">Log Out</a></li>
                </ul>
            </div>
        </div>
        <div id="content_header"></div>
        <div id="site_content">
            <div id="sidebar_container">


            </div>
            <div id="content">

                <p><strong>Update Staff Annual Leave</strong></p>

                <table width='800' border='2'>
                    <tr>
                        <th>No</th>
                        <th>Username</th>
                        <th>Full Name</th>
                        <th>Phone</th>
                        <th>Email</th>
                        <th>Leave Balance</th>
                        <th>Action</th>
                    </tr>

                    {{with .StaffPage}} {{range .}}
                    <tr>
                        <th>{{.Index}}</th>
                        <th>{{.Username}}</th>
                        <th>{{.FullName}}</th>
                        <th>{{.Phone}}</th>
                        <th>{{.Email}}</th>
                        <th>{{.LeaveBalance}}</th>
                        <th><a><button username="{{.Username}}" value="{{.LeaveBalance}}" class="myModalBtn">Update</button></a></th>
                    </tr>
                    {{end}} {{end}}



                </table>
                <br/><br/><br/>
            </div>
        </div>
        <div id="content_footer"></div>
        <div id="footer">
            <p>Hazim & Imran
        </div>
        <!-- The Modal -->
        <div id="myModal" class="modal">

            <!-- Modal content -->
            <div class="modal-content">
                <span class="close">&times;</span>
                <p>Update staff's leave balance</p>
                <!-- <p class="vLBShow"></p> -->
                <form action="/hr2/updateLeave" method="POST">
                    <input id="vLBShow" type="number" name="num" val="0">
                    <input type="hidden" id="vLBUsername" name="username">
                    <button type="submit">Update</button>
                </form>
                <button class="closeB">Close</button>
            </div>

        </div>
    </div>
    <script src="../static/js/jquery-3.3.1.min.js"></script>
    <script>
        // Get the modal
        var modal = document.getElementById('myModal');

        // Get the button that opens the modal
        // var btn = document.getElementsByClassName("myModalBtn");
        var btns = document.querySelectorAll('.myModalBtn');

        for (i = 0; i < btns.length; ++i) {
            btns[i].onclick = function (event) {
                modal.style.display = "block";
                var v = $(event.target).attr("value");
                // console.log(v);
                $("#vLBShow").val(v);
                $("#vLBUsername").val($(this).attr("username"));
                // $( "#vLBShow" ).attr( "username", $(this).attr("username") );
            }
        };

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        var span2 = document.getElementsByClassName("closeB")[0];

        // When the user clicks on the button, open the modal 
        // btn.onclick = function () {
        //     modal.style.display = "block";
        // }

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        }

        span2.onclick = function () {
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        // $("#modUpdate").on("click", function () {
        //     var u = $(this).attr("username");
        //     var s = "/hr2/"+u
        //     window.location.replace(s);
        // });
    </script>
</body>

</html>